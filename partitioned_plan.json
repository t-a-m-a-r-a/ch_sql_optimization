{
"EXPLAIN PLAN json = 1, indexes = 1, description = 1\r\nselect\r\n\tu.user_id, u.name, u.country\r\n\t,o.total_orders, o.total_amount\r\nfrom users u\r\njoin (select user_id\r\n\t\t, count(order_id) as total_orders\r\n\t\t, sum(amount) as total_amount\r\n\t  from orders_optimized\r\n\t  where order_date >= today() - 30\r\n\t  and status != 'cancelled'\r\n\t  group by user_id) o\r\non u.user_id = o.user_id\r\norder by o.total_orders desc, o.total_amount desc\r\nlimit 10": [
	{
		"explain" : "[\n  {\n    \"Plan\": {\n      \"Node Type\": \"Expression\",\n      \"Node Id\": \"Expression_15\",\n      \"Description\": \"Project names\",\n      \"Plans\": [\n        {\n          \"Node Type\": \"Limit\",\n          \"Node Id\": \"Limit_14\",\n          \"Description\": \"preliminary LIMIT (without OFFSET)\",\n          \"Plans\": [\n            {\n              \"Node Type\": \"Sorting\",\n              \"Node Id\": \"Sorting_13\",\n              \"Description\": \"Sorting for ORDER BY\",\n              \"Plans\": [\n                {\n                  \"Node Type\": \"Expression\",\n                  \"Node Id\": \"Expression_19\",\n                  \"Description\": \"(Before ORDER BY + Projection)\",\n                  \"Plans\": [\n                    {\n                      \"Node Type\": \"Expression\",\n                      \"Node Id\": \"Expression_22\",\n                      \"Plans\": [\n                        {\n                          \"Node Type\": \"Join\",\n                          \"Node Id\": \"Join_21\",\n                          \"Plans\": [\n                            {\n                              \"Node Type\": \"Expression\",\n                              \"Node Id\": \"Expression_1\",\n                              \"Description\": \"Change column names to column identifiers\",\n                              \"Plans\": [\n                                {\n                                  \"Node Type\": \"ReadFromMergeTree\",\n                                  \"Node Id\": \"ReadFromMergeTree_0\",\n                                  \"Description\": \"default.users\",\n                                  \"Indexes\": [\n                                    {\n                                      \"Type\": \"PrimaryKey\",\n                                      \"Condition\": \"true\",\n                                      \"Initial Parts\": 1,\n                                      \"Selected Parts\": 1,\n                                      \"Initial Granules\": 123,\n                                      \"Selected Granules\": 123\n                                    }\n                                  ]\n                                }\n                              ]\n                            },\n                            {\n                              \"Node Type\": \"Expression\",\n                              \"Node Id\": \"Expression_18\",\n                              \"Description\": \"(Change column names to column identifiers + (Project names + Projection))\",\n                              \"Plans\": [\n                                {\n                                  \"Node Type\": \"Aggregating\",\n                                  \"Node Id\": \"Aggregating_6\",\n                                  \"Plans\": [\n                                    {\n                                      \"Node Type\": \"Expression\",\n                                      \"Node Id\": \"Expression_5\",\n                                      \"Description\": \"Before GROUP BY\",\n                                      \"Plans\": [\n                                        {\n                                          \"Node Type\": \"Expression\",\n                                          \"Node Id\": \"Expression_20\",\n                                          \"Plans\": [\n                                            {\n                                              \"Node Type\": \"ReadFromMergeTree\",\n                                              \"Node Id\": \"ReadFromMergeTree_2\",\n                                              \"Description\": \"default.orders_optimized\",\n                                              \"Indexes\": [\n                                                {\n                                                  \"Type\": \"MinMax\",\n                                                  \"Keys\": [\"order_date\"],\n                                                  \"Condition\": \"(order_date in [20160, +Inf))\",\n                                                  \"Initial Parts\": 63,\n                                                  \"Selected Parts\": 8,\n                                                  \"Initial Granules\": 1226,\n                                                  \"Selected Granules\": 145\n                                                },\n                                                {\n                                                  \"Type\": \"Partition\",\n                                                  \"Keys\": [\"toYYYYMM(order_date)\"],\n                                                  \"Condition\": \"(toYYYYMM(order_date) in [202503, +Inf))\",\n                                                  \"Initial Parts\": 8,\n                                                  \"Selected Parts\": 8,\n                                                  \"Initial Granules\": 145,\n                                                  \"Selected Granules\": 145\n                                                },\n                                                {\n                                                  \"Type\": \"PrimaryKey\",\n                                                  \"Condition\": \"true\",\n                                                  \"Initial Parts\": 8,\n                                                  \"Selected Parts\": 8,\n                                                  \"Initial Granules\": 145,\n                                                  \"Selected Granules\": 145\n                                                }\n                                              ]\n                                            }\n                                          ]\n                                        }\n                                      ]\n                                    }\n                                  ]\n                                }\n                              ]\n                            }\n                          ]\n                        }\n                      ]\n                    }\n                  ]\n                }\n              ]\n            }\n          ]\n        }\n      ]\n    }\n  }\n]"
	}
]}
